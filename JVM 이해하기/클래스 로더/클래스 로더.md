# 클래스 로더

`로딩-링크-초기화` 순으로 진행된다.

## 로딩

1. 클래스 로더가 *.class* 파일을 읽고 그 내용에 따라 적절한 **바이너리 데이터를 만들고 메소드 영역에 저장**한다.
2. 메소드 영역에 저장되는 데이터
   - FQCN(Fully Qualified Class Name)
   - 클래스, 인터페이스, Enum
   - 메소드와 변수
3. 로딩이 끝나면 **해당 클래스 타입의 Class 객체를 생성해 힙 영역에 저장**한다.

## 링크

1. `Verify-Prepare-Resovle` 세 단계로 나눠져 있다.
2. Verify: *.class* 파일 형식이 유효한지 체크한다.
3. Preparation: 클래스 변수(static 변수)와 기본 값에 필요한 메모리를 **준비**한다.
4. Resolve: 심볼릭 메모리 레퍼런스를 메소드 영역에 있는 실제 레퍼런스로 **교체**한다.
    - Optional: 링크 과정에서 일어날 수도 있고, 실제 해당 레퍼런스를 사용할 때 일어날 수도 있다.
    - 논리적인 레퍼런스(힙 영역의 실제 레퍼런스를 가리키지 않음)를 실제 레퍼런스를 가리키도록 교체하는 것

## 초기화

1. static 변수의 값을 할당한다. (static 블럭이 있다면 이때 실행된다.)

## 계층 구조로 이루어진 클래스 로더

1. 부트 스트랩 클래스 로더: `JAVA_HOME\lib`에 있는 코어 자바 API를 제공한다.
   - 최상위 우선순위를 가진다.(가장 먼저 클래스를 찾는다.)
2. 플랫폼 클래스 로더: `JAVA_HOME\lib\ext` 폴더 또는 `java.ext.dirs` 시스템 변수에 해당하는 위치에 있는 클래스를 읽는다.
3. 애플리케이션 클래스 로더: 애플리케이션 클래스 패스에서 클래스를 읽는다.
   - 애플리케이션 클래스 패스: 애플리케이션을 실행할 때 주는 `-classpath` 옵션 또는 `java.class.path` 환경 변수의 값에 해당하는 위치를 말한다.
